---
title: "ch-5_reading_note"
author: "Wendy"
date: "June 29, 2016"
output: html_document
---

| Type | --- |
| --- | --- |
| Cross-Validation | --- |
| --- | --- |


###Cross-Validation
####from page 190 lab from 205 

**example @ 5.1.1**
*purpose:* to check which regression function is better  
*method:* to make split the dataset into two part.   
*result:* the poly(horsepower, 2) show more lower error rate. 
__NEXT STEP: make page 192 charts --> is anyway to make a function for it. __
```{r}
library(ISLR)
set.seed(1)
set.seed(2)
train_index = sample(c(TRUE, FALSE), size = nrow(Auto), replace = TRUE, prob = c(.5, .5))

# make the plot for n = 1:10 error rate with same train_index
make_poly_1st <- function(n, train_index){
  temp.test_error <- NULL
  poly_num <- NULL
  
  for (i in 1:n) {
    temp.lm = lm(mpg ~ poly(horsepower, i), data = Auto, subset = train_index)
    temp.lm.pre = predict(temp.lm, Auto[!train_index, ])
    temp.test_error <- c(temp.test_error, mean((Auto[!train_index, "mpg"] - temp.lm.pre)^2))
    poly_num <- c(poly_num, i)
    
  }
  
  poly_test_err <- data.frame("poly" = poly_num, "test_err" = temp.test_error)
  return (poly_test_err)
}

# for 10 different train_index, check the n=1:10 error rate. 
make_poly_10 <- function(){
  for (i in 1:10){
    set.seed(i)
    train_index <- sample(c(TRUE, FALSE), size = nrow(Auto), replace = TRUE, prob = c(.5, .5))
    if (i == 1)
      {
      temp_data <- make_poly_1st(10, train_index)
      plot(test_err ~ poly, data = temp_data, type = "b", ylim = range(15, 28))
      # print (head(temp_data))
      }
    else
      {
      temp_data <- make_poly_1st(10, train_index)
      lines(temp_data$test_err, type = "b", col = i)
      # print (head(temp_data))
      }
    
  }
}

make_poly_10()
```

note to color the work in the HTML
<span style="color:orange"> xxx </span>  
